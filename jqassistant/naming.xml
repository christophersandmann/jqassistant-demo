<jqa:jqassistant-rules xmlns:jqa="http://www.buschmais.com/jqassistant/core/analysis/rules/schema/v1.0">

    <constraint id="naming:EntitiesInModelPackages">
        <requiresConcept refId="jpa2:Entity" />
        <description>All JPA entities must be located in "model" packages.</description>
        <cypher><![CDATA[
          MATCH
            (p:Package)-[:CONTAINS]->(e:Jpa:Entity)
          WHERE NOT
            p.fqn =~ '.*\\.api\\.model'
          RETURN
            e.fqn as Entity
        ]]></cypher>
    </constraint>

    <constraint id="naming:PackageNameContainsModuleName">
        <description>Verifies that all types are located in packages containing the group (groupId) and name (artifactId) of the Maven module.</description>
        <cypher><![CDATA[
         MATCH
           (module:Maven)-[:CREATES]->(artifact:Artifact)
         WITH
           artifact, artifact.group + "\\." + artifact.name + "\\..*" as prefixPattern
         MATCH
           (artifact)-[:CONTAINS]->(type:Type)
         WHERE NOT
           type.fqn =~ prefixPattern
         RETURN
           type as TypeInInvalidPackage
        ]]></cypher>
    </constraint>

</jqa:jqassistant-rules>